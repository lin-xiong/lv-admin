{"remainingRequest":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!/Users/leo/Documents/work/Code/GitHub/vue-manage-system/src/components/page/CouponList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/src/components/page/CouponList.vue","mtime":1603122950544},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { CouponsListData } from \"../../api/index\";\nimport { CouponsEditData } from \"../../api/index\";\nimport { CouponsSearchData } from \"../../api/index\";\nimport { CouponsAddData } from \"../../api/index\";\nimport { shopListData } from \"../../api/index\";\nimport { CouponsExeData } from \"../../api/index\";\nimport { regionListData } from \"../../api/index\";\nexport default {\n  name: 'CouponsList',\n  data: function data() {\n    return {\n      query: {\n        pageIndex: 1,\n        pageSize: 10\n      },\n      tableData: [],\n      multipleSelection: [],\n      delList: [],\n      editVisible: false,\n      addVisible: false,\n      pageTotal: 0,\n      editCouponsform: {},\n      addCouponsform: {},\n      multiShop: [],\n      multiRegion: [],\n      form: {},\n      idx: -1,\n      id: -1\n    };\n  },\n  created: function created() {\n    this.getData();\n  },\n  methods: {\n    // 获取 easy-mock 的模拟数据\n    getData: function getData() {\n      var _this = this;\n\n      // regionListData().then(res => {\n      //     this.multiRegion = res.region;\n      //     console.log(this.multiRegion);\n      // });\n      shopListData().then(function (res) {\n        console.log(res);\n        _this.multiShop = res.data;\n      });\n      CouponsListData(this.query).then(function (res) {\n        console.log(res);\n        _this.tableData = res.data;\n        _this.pageTotal = res.pageTotal;\n      });\n    },\n    // 触发搜索按钮\n    handleSearch: function handleSearch() {\n      var _this2 = this;\n\n      this.$set(this.query, 'pageIndex', 1);\n      CouponsSearchData(this.query).then(function (res) {\n        console.log(res);\n        _this2.tableData = res.data;\n        _this2.pageTotal = res.pageTotal;\n      });\n    },\n    // 执行操作\n    handleExe: function handleExe(index, row) {\n      var _this3 = this;\n\n      // 二次确认执行\n      this.$confirm('确定要执行吗？', '提示', {\n        type: 'warning'\n      }).then(function (res) {\n        _this3.idx = index;\n        CouponsExeData(row).then(function (res) {\n          console.log(res);\n\n          if (res >= 1) {\n            _this3.$message.success('执行成功');\n\n            row.status = 2;\n          }\n        });\n      }).catch(function () {});\n    },\n    // 执行操作\n    handleStop: function handleStop(index, row) {\n      var _this4 = this;\n\n      // 二次确认执行\n      this.$confirm('确定要停止' + row.shopId + row.keyword + '吗？', '提示', {\n        type: 'warning'\n      }).then(function (res) {\n        _this4.idx = index;\n        row.status = -1;\n        CouponsEditData(row).then(function (res) {\n          console.log(res);\n\n          if (res >= 1) {\n            _this4.$message.success('停止执行成功');\n          }\n        });\n      }).catch(function () {});\n    },\n    // 执行操作\n    handleRerun: function handleRerun(index, row) {\n      var _this5 = this;\n\n      // 二次确认执行\n      this.$confirm('确定要继续运行' + row.shopName + row.keyword + '吗？', '提示', {\n        type: 'warning'\n      }).then(function (res) {\n        _this5.idx = index;\n        row.status = 2;\n        CouponsEditData(row).then(function (res) {\n          console.log(res);\n\n          if (res >= 1) {\n            _this5.$message.success('继续执行成功');\n          }\n        });\n      }).catch(function () {});\n    },\n    // 多选操作\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    delAllSelection: function delAllSelection() {\n      var length = this.multipleSelection.length;\n      var str = '';\n      this.delList = this.delList.concat(this.multipleSelection);\n\n      for (var i = 0; i < length; i++) {\n        str += this.multipleSelection[i].name + ' ';\n      }\n\n      this.$message.error(\"\\u5220\\u9664\\u4E86\".concat(str));\n      this.multipleSelection = [];\n    },\n    // 编辑操作\n    handleEdit: function handleEdit(index, row) {\n      this.idx = index;\n      this.editCouponsform = row;\n      this.editVisible = true;\n    },\n    // 拷贝操作\n    handleCopy: function handleCopy(index, row) {\n      this.idx = index;\n      this.addCouponsform = row;\n      this.addVisible = true;\n    },\n    // 保存编辑\n    saveEdit: function saveEdit() {\n      var _this6 = this;\n\n      CouponsEditData(this.editCouponsform).then(function (res) {\n        console.log(res);\n\n        if (res == 1) {\n          _this6.editVisible = false;\n\n          _this6.$message.success(\"\\u4FEE\\u6539\\u7B2C \".concat(_this6.idx + 1, \" \\u884C\\u6210\\u529F\"));\n\n          _this6.$set(_this6.tableData, _this6.idx, _this6.editCouponsform);\n        } else {\n          _this6.$message.error('修改出错！');\n\n          console.log('error edit shop!!');\n          return false;\n        }\n      });\n    },\n    handleAdd: function handleAdd() {\n      this.addVisible = true;\n    },\n    // 保存添加\n    saveAdd: function saveAdd() {\n      var _this7 = this;\n\n      CouponsAddData(this.addCouponsform).then(function (res) {\n        console.log(res);\n\n        if (res == 1) {\n          _this7.addVisible = false;\n\n          _this7.$message.success(\"\\u589E\\u52A0addCouponsform\\u6210\\u529F\");\n\n          _this7.getData();\n        } else {\n          _this7.$message.error('增加addCouponsform出错！');\n\n          console.log('error add shop!!');\n          return false;\n        }\n      });\n    },\n    // 分页导航\n    handlePageChange: function handlePageChange(val) {\n      var _this8 = this;\n\n      this.$set(this.query, 'pageIndex', val);\n      CouponsSearchData(this.query).then(function (res) {\n        console.log(res);\n        _this8.tableData = res.data;\n        _this8.pageTotal = res.pageTotal;\n      });\n    },\n    formatDate: function formatDate(row, column) {\n      // 获取单元格数据\n      var data = row[column.property];\n\n      if (data == null) {\n        return null;\n      }\n\n      var dt = new Date(data);\n      return dt.getFullYear() + '-' + (dt.getMonth() + 1) + '-' + dt.getDate();\n    },\n    formatShopName: function formatShopName(row, column) {\n      // 获取单元格数据\n      var data = row[column.property];\n      if (this.multiShop == null) return null;\n\n      for (var i = 0; i < this.multiShop.length; i++) {\n        if (data == this.multiShop[i].id) return this.multiShop[i].shopName;\n      }\n    }\n  }\n};",null]}