{"remainingRequest":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!/Users/leo/Documents/work/Code/GitHub/vue-manage-system/src/components/page/Running.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/src/components/page/Running.vue","mtime":1605059499367},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { CaseListData } from \"../../api/index\";\nimport { taskTypeListData } from \"../../api/index\";\nimport FileSaver from 'file-saver';\nimport XLSX from 'xlsx';\nexport default {\n  name: 'caseList',\n  data: function data() {\n    return {\n      query: {\n        pageIndex: 1,\n        pageSize: 10\n      },\n      tableData: [],\n      multipleSelection: [],\n      delList: [],\n      editVisible: false,\n      addVisible: false,\n      pageTotal: 0,\n      editAddrform: {},\n      addAddrform: {},\n      multiShop: [],\n      taskTypes: {},\n      form: {},\n      idx: -1,\n      id: -1,\n      setTimer: null,\n      getDataOnce: true\n    };\n  },\n  created: function created() {\n    console.log(\"created\");\n    if (!this.getDataOnce) return;\n    this.getDataOnce = false;\n    this.getData();\n  },\n  methods: {\n    // 获取 easy-mock 的模拟数据\n    getData: function getData() {\n      var _this = this;\n\n      CaseListData().then(function (res) {\n        //this.tableData\n        console.log(res); //this.$set(this.tableData, this.idx, this.editAddrform);\n\n        _this.tableData = res.data;\n      }).finally(function (res) {\n        _this.setTimer = setTimeout(function () {\n          _this.getData();\n        }, 2000);\n      });\n      taskTypeListData().then(function (res) {\n        console.log(res);\n        _this.taskTypes = res.taskType;\n      });\n    },\n    // 触发搜索按钮\n    handleSearch: function handleSearch() {\n      var _this2 = this;\n\n      this.$set(this.query, 'pageIndex', 1);\n      addrSearchData(this.query).then(function (res) {\n        console.log(res);\n        _this2.tableData = res.data;\n        _this2.pageTotal = res.pageTotal;\n      });\n    },\n    // 执行操作\n    handleExe: function handleExe(index, row) {\n      var _this3 = this;\n\n      // 二次确认执行\n      this.$confirm('确定要执行吗？', '提示', {\n        type: 'warning'\n      }).then(function (res) {\n        _this3.idx = index;\n        addrExeData(row).then(function (res) {\n          console.log(res);\n\n          if (res == 1) {\n            _this3.$message.success('执行成功');\n\n            row.status = 2;\n          }\n        });\n      }).catch(function () {});\n    },\n    // 多选操作\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    delAllSelection: function delAllSelection() {\n      var length = this.multipleSelection.length;\n      var str = '';\n      this.delList = this.delList.concat(this.multipleSelection);\n\n      for (var i = 0; i < length; i++) {\n        str += this.multipleSelection[i].name + ' ';\n      }\n\n      this.$message.error(\"\\u5220\\u9664\\u4E86\".concat(str));\n      this.multipleSelection = [];\n    },\n    // 编辑操作\n    handleEdit: function handleEdit(index, row) {\n      this.idx = index;\n      this.editAddrform = row;\n      this.editVisible = true;\n    },\n    // 保存编辑\n    saveEdit: function saveEdit() {\n      var _this4 = this;\n\n      addrEditData(this.editAddrform).then(function (res) {\n        console.log(res);\n\n        if (res == 1) {\n          _this4.editVisible = false;\n\n          _this4.$message.success(\"\\u4FEE\\u6539\\u7B2C \".concat(_this4.idx + 1, \" \\u884C\\u6210\\u529F\"));\n\n          _this4.$set(_this4.tableData, _this4.idx, _this4.editAddrform);\n        } else {\n          _this4.$message.error('修改出错！');\n\n          console.log('error edit Addr!!');\n          return false;\n        }\n      });\n    },\n    handleAdd: function handleAdd() {\n      this.addVisible = true;\n    },\n    // 保存添加\n    saveAdd: function saveAdd() {\n      var _this5 = this;\n\n      addrAddData(this.addAddrform).then(function (res) {\n        console.log(res);\n\n        if (res == 1) {\n          _this5.addVisible = false;\n\n          _this5.$message.success(\"\\u589E\\u52A0Addr\\u6210\\u529F\");\n\n          _this5.getData();\n        } else {\n          _this5.$message.error('增加Addr出错！');\n\n          console.log('error add shop!!');\n          return false;\n        }\n      });\n    },\n    // 分页导航\n    handlePageChange: function handlePageChange(val) {\n      this.$set(this.query, 'pageIndex', val);\n      this.getData();\n    },\n    formatDate: function formatDate(row, column) {\n      // 获取单元格数据\n      var data = row[column.property];\n\n      if (data == null) {\n        return null;\n      }\n\n      var dt = new Date(data);\n      return dt.getFullYear() + '-' + (dt.getMonth() + 1) + '-' + dt.getDate() + \" \" + dt.getHours() + \":\" + dt.getMinutes() + \":\" + dt.getSeconds();\n    },\n    formatShopName: function formatShopName(row, column) {\n      // 获取单元格数据\n      var data = row[column.property];\n      if (this.multiShop == null) return null;\n\n      for (var i = 0; i < this.multiShop.length; i++) {\n        if (data == this.multiShop[i].id) return this.multiShop[i].shopName;\n      }\n    },\n    formatAddr: function formatAddr(row, column) {\n      // 获取单元格数据\n      var data = row[column.property];\n      if (data) return data.substr(3, 4);else return \"\";\n    },\n    formatStatus: function formatStatus(row, column) {\n      // 获取单元格数据\n      // <template slot-scope=\"scope\"> \n      //             <span v-if=\"scope.row.status==2\">任务被拉取</span>\n      //             <span v-if=\"scope.row.status>=200 && scope.row.status<300\">开始执行</span>\n      //             <span v-if=\"scope.row.status>=300\">执行 \"scope.row.status-300\"</span>\n      //             <span v-if=\"scope.row.status==4\">开始执行</span>\n      //             <span v-if=\"scope.row.status==5\">取优惠券成功</span>\n      //             <span v-if=\"scope.row.status==6\">取优惠券失败</span>\n      //             <span v-if=\"scope.row.status==7\">设置收件人失败</span>\n      //             <span v-if=\"scope.row.status==8\">下单成功</span>\n      //             <span v-if=\"scope.row.status==9\">下单失败</span>\n      //             <span v-if=\"scope.row.status==10\">代付连接完成</span>\n      //             <span v-if=\"scope.row.status==11\">完成操作</span>\n      //         </template>\n      var data = row[column.property];\n      if (data == 2) return \"任务被拉取\";\n      if (data == 200) return \"开始执行\";\n      if (data >= 300 && data < 400) return \"执行完第\" + (data - 300) + \"个SKU\";\n      if (data == 400) return \"进入结算\";\n      if (data == 401) return \"已提交地址\";\n      if (data == 800) return \"进入付款\";\n      if (data == 500) return \"已生成订单\";\n      if (data == 811) return \"支付异常\";\n      if (data == 1000) return \"完成\";\n      if (data > 1000) return \"被调用\";\n    },\n    formatTaskType: function formatTaskType(row, column) {\n      // 获取单元格数据\n      var data = row[column.property];\n      return this.taskTypes.find(function (x) {\n        return x.key == data;\n      }).label;\n    }\n  },\n  deactivated: function deactivated() {\n    console.log(\"deactivated\");\n    clearTimeout(this.setTimer);\n    this.setTimer = null;\n    this.getDataOnce = true;\n  },\n  activated: function activated() {\n    console.log(\"activated\");\n    if (!this.getDataOnce) return;\n    this.getDataOnce = false;\n    this.getData();\n  }\n};",null]}