{"remainingRequest":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!/Users/leo/Documents/work/Code/GitHub/vue-manage-system/src/components/page/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/src/components/page/Login.vue","mtime":1606672077923},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/leo/Documents/work/Code/GitHub/vue-manage-system/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { loginData } from '../../api/index';\nexport default {\n    data: function() {\n        return {\n            query: {\n                login: \"\",\n                ps: \"\"\n            },\n            param: {\n                username: 'JDthd',\n                password: '',\n            },\n            rules: {\n                username: [{ required: true, message: '请输入用户名', trigger: 'blur' }],\n                password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\n            },\n        };\n    },\n    methods: {\n        submitForm() {\n            this.$refs.login.validate(valid => {\n                if (valid) {\n                    let params = {\n                        login:this.param.username,\n                        ps:this.param.password\n                    }\n                    loginData(params).then(res => {\n                        console.log(res);\n                        if(res.code)\n                         {  \n                            localStorage.setItem('ms_username', this.param.username);\n                            localStorage.setItem('ms_ps', res.user.ps);\n                            var pp = res.user.path.split(';');\n                            localStorage.setItem('ms_paths', pp);\n                            this.$message.success('登录成功');\n                            this.$router.push(pp[0]);\n                         }\n                        else {\n                            this.$message.error('请输入正确的账号和密码');\n                            console.log('error submit!!');\n                            return false;\n                        }\n                    });\n                    \n                }\n                else {\n                    this.$message.error('请输入账号和密码');\n                    console.log('error submit!!');\n                    return false;\n                } \n            });\n        },\n    },\n};\n",null]}